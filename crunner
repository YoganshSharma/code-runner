#!/bin/bash

## Colors !

red="\e[0;91m"
blue="\e[0;94m"
expand_bg="\e[K"
blue_bg="\e[0;104m${expand_bg}"
red_bg="\e[0;101m${expand_bg}"
green_bg="\e[0;102m${expand_bg}"
green="\e[0;92m"
white="\e[0;97m"
bold="\e[1m"
uline="\e[4m"
reset="\e[0m"

## Help menu

USAGE="$(basename "$0"): ./crunner filename.extension -- compiles and executes the executable

NOTE: You must run this tool in the directory where the code file is.
"

while getopts f:h input
do
case "${input}"
in
h) echo "${USAGE}" && exit 0 ;;
*)  echo
	echo "Invalid option: -$input" && exit 0 ;;
esac
done

## Logic for runnig(compiling+executing) files

FILE=$1

if [[ "${FILE#*.}" == c ]]; then

    gcc -Wall -g $1 -o ${FILE%%.*}
    rm -rf ./${FILE%%.*}.dSYM
    ./${FILE%%.*}

elif [[ "${FILE#*.}" == cpp ]]; then

    g++ -Wall -g $1 -o ${FILE%%.*}
    rm -rf ./${FILE%%.*}.dSYM
    ./${FILE%%.*}

else 

    echo "${red}ERROR:${reset} Unsupported filetype specified.
${blue}Exitting crunner..${reset}"

fi
